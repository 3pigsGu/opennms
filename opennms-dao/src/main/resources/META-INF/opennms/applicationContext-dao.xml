<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">
        
	<bean id="init-datasource-factory" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
		<property name="staticMethod"><value>org.opennms.netmgt.config.DataSourceFactory.init</value></property>
	</bean>

	<bean id="dataSource" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean" depends-on="init-datasource-factory">
		<property name="staticMethod"><value>org.opennms.netmgt.config.DataSourceFactory.getInstance</value></property>
	</bean>
	
	<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
		<property name="dataSource">
			<ref bean="dataSource" />
		</property>
		<property name="annotatedClasses">
			<list>
				<value>org.opennms.netmgt.model.OnmsDistPoller</value>
				<value>org.opennms.netmgt.model.OnmsAssetRecord</value>
				<value>org.opennms.netmgt.model.OnmsNode</value>
				<value>org.opennms.netmgt.model.OnmsIpInterface</value>
				<value>org.opennms.netmgt.model.OnmsSnmpInterface</value>
				<value>org.opennms.netmgt.model.OnmsMonitoredService</value>
				<value>org.opennms.netmgt.model.OnmsCategory</value>
				<value>org.opennms.netmgt.model.OnmsServiceType</value>
				<value>org.opennms.netmgt.model.OnmsOutage</value>
	        	<value>org.opennms.netmgt.model.OnmsEvent</value>
        	    <value>org.opennms.netmgt.model.OnmsAlarm</value>
                <value>org.opennms.netmgt.model.OnmsNotification</value>
                <value>org.opennms.netmgt.model.OnmsUserNotification</value>
				
			</list>
		</property>
		<!--  property name="schemaUpdate" value="true">
		</property -->
		<property name="annotatedPackages">
			<list>
				<value>org.opennms.netmgt.model</value>
			</list>
		</property>
		<property name="hibernateProperties">
			<value>
				hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
				hibernate.show_sql=true
				hibernate.format_sql=true
			</value>
		</property>
	</bean>

  <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <bean id="transactionTemplate" class="org.springframework.transaction.support.TransactionTemplate">
    <property name="transactionManager" ref="transactionManager" />
  </bean>
	
  <bean id="alarmFactory" class="org.opennms.netmgt.dao.jdbc.alarm.AlarmFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="alarmDao" class="org.opennms.netmgt.dao.jdbc.AlarmDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="assetRecordFactory" class="org.opennms.netmgt.dao.jdbc.asset.AssetRecordFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="assetRecordDao" class="org.opennms.netmgt.dao.jdbc.AssetRecordDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="categoryFactory" class="org.opennms.netmgt.dao.jdbc.category.CategoryFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="categoryDao" class="org.opennms.netmgt.dao.jdbc.CategoryDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>

    <bean id="distPollerFactory" class="org.opennms.netmgt.dao.jdbc.distpoller.DistPollerFactory">
      <property name="dataSource" ref="dataSource" />
    </bean>
    
	<bean id="distPollerDao" class="org.opennms.netmgt.dao.jdbc.DistPollerDaoJdbc">
		<property name="dataSource" ref="dataSource" />
	</bean>
<!-- 
	<bean id="distPollerDao" class="org.opennms.netmgt.dao.hibernate.DistPollerDaoHibernate">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>
-->
    <bean id="demandPollFactory" class="org.opennms.netmgt.dao.jdbc.demandpoll.DemandPollFactory">
      <property name="dataSource" ref="dataSource" />
    </bean>

  <bean id="demandPollDao" class="org.opennms.netmgt.dao.jdbc.DemandPollDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="eventFactory" class="org.opennms.netmgt.dao.jdbc.event.EventFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="eventDao" class="org.opennms.netmgt.dao.jdbc.EventDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="ipInterfaceFactory" class="org.opennms.netmgt.dao.jdbc.ipif.IpInterfaceFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="ipInterfaceDao" class="org.opennms.netmgt.dao.jdbc.IpInterfaceDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="monitoredServiceFactory" class="org.opennms.netmgt.dao.jdbc.monsvc.MonitoredServiceFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="monitoredServiceDao" class="org.opennms.netmgt.dao.jdbc.MonitoredServiceDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="nodeFactory" class="org.opennms.netmgt.dao.jdbc.node.NodeFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="nodeDao" class="org.opennms.netmgt.dao.jdbc.NodeDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="notificationFactory" class="org.opennms.netmgt.dao.jdbc.notification.NotificationFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="notifiactionDao" class="org.opennms.netmgt.dao.jdbc.NotificationDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="outageFactory" class="org.opennms.netmgt.dao.jdbc.outage.OutageFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="outageDao" class="org.opennms.netmgt.dao.jdbc.OutageDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="serviceTypeFactory" class="org.opennms.netmgt.dao.jdbc.svctype.ServiceTypeFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="serviceTypeDao" class="org.opennms.netmgt.dao.jdbc.ServiceTypeDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="snmpInterfaceFactory" class="org.opennms.netmgt.dao.jdbc.snmpif.SnmpInterfaceFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="snmpInterfaceDao" class="org.opennms.netmgt.dao.jdbc.SnmpInterfaceDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="userNotificationFactory" class="org.opennms.netmgt.dao.jdbc.usernotification.UserNotificationFactory">
  	<property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="userNotificationDao" class="org.opennms.netmgt.dao.jdbc.UserNotificationDaoJdbc">
  	<property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="availabilityReportLocatorDao" class="org.opennms.netmgt.dao.AvailabilityReportLocatorJdbc">
    <property name="dataSource" ref="dataSource" />
  </bean>
  
  <bean id="aggregateStatusViewDao" class="org.opennms.netmgt.dao.jdbc.AggregateStatusViewDaoJdbc" >
    <property name="dataSource" ref="dataSource" />
  </bean>
  	<!-- SqlMap setup for iBATIS Database Layer -->
	<bean id="sqlMapClient" class="org.springframework.orm.ibatis.SqlMapClientFactoryBean">
		<property name="configLocation" >
    		<value>classpath:/META-INF/opennms/sqlMapConfig.xml</value>
		</property>
 	</bean>

	<bean id="pathOutageDao" class="org.opennms.netmgt.dao.ibatis.SqlMapClientPathOutageDao">
		<property name="dataSource"><ref local="dataSource"/></property>
		<property name="sqlMapClient"><ref local="sqlMapClient"/></property>
	</bean>  
<!-- 
	<bean id="aggregateStatusViewDao" class="org.opennms.netmgt.dao.ibatis.SqlMapClientAggStatViewDao">
		<property name="dataSource"><ref local="dataSource"/></property>
		<property name="sqlMapClient"><ref local="sqlMapClient"/></property>
	</bean>  
 -->	

</beans>
