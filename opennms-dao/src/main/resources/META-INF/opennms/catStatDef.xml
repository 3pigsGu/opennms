<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
          PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
          "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CatStatDef">
	<typeAlias alias ="catStatDef" type="org.opennms.netmgt.model.AggregateStatusDefinition" />
	
	<resultMap class="catStatDef" id="result">
		<result property="categoryId" column="categoryID"/>
		<result property="statusDefId" column="statusDefId"/>
	</resultMap>
	
	<select id="getAll" resultMap="result">
		select * from category_statusdef
	</select>

	<select id="getByID" resultMap="result">
		select * from category_statusdef where categoryId=#value#
	</select>

	<select id="getByStatDefId" resultMap="result">
		select * from category_statusdef where statusDefId=#value#
	</select>
	
	<insert id="insert" parameterClass="catStatDef">
		<selectKey keyProperty="categoryId" resultClass="int">
			select nextval('opennmsNxtId')
		</selectKey>
		insert into category_statusdef (categoryId, statusDefId) values (#categoryId#, #statusDefId#)
	</insert>
	
	<update id="update" parameterClass="catStatDef">
		update category_statusdef set name=#statusDefId# where categoryId=#categoryId#
	</update>
	
	<delete id="delete" parameterClass="int">
		delete from category_statusdef where categoryId=#categoryId#
	</delete>
	
</sqlMap>