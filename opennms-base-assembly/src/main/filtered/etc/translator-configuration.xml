<?xml version="1.0" encoding="UTF-8" standalone="no"?><event-translator-configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.opennms.org/xsd/translator-configuration http://www.opennms.org/xsd/config/translator-configuration.xsd ">
  
  <!-- Improved LinkDown/LinkUp events.  Uses translator to add DB information to link status traps events -->
  <translation>
    <event-translation-spec uei="uei.opennms.org/generic/traps/SNMP_Link_Down">
      <mappings>
        <mapping>
          <assignment name="uei" type="field">
            <value result="uei.opennms.org/translator/traps/SNMP_Link_Down" type="constant"/>
          </assignment>
          <assignment name="ifDescr" type="parameter">
            <value result="SELECT snmp.snmpIfDescr FROM snmpInterface snmp WHERE snmp.nodeid = ?::integer AND snmp.snmpifindex = ?::integer" type="sql">
              <value matches=".*" name="nodeid" result="${0}" type="field"/>
              <value matches=".*" name="~^\.1\.3\.6\.1\.2\.1\.2\.2\.1\.1\.([0-9]*)$" result="${0}" type="parameter"/>
            </value>
          </assignment>
          <assignment name="ifName" type="parameter">
            <value result="SELECT snmp.snmpIfName FROM snmpInterface snmp WHERE snmp.nodeid = ?::integer AND snmp.snmpifindex = ?::integer" type="sql">
              <value matches=".*" name="nodeid" result="${0}" type="field"/>
              <value matches=".*" name="~^\.1\.3\.6\.1\.2\.1\.2\.2\.1\.1\.([0-9]*)$" result="${0}" type="parameter"/>
            </value>
          </assignment>
          <assignment name="ifAlias" type="parameter">
            <value result="SELECT snmp.snmpIfAlias FROM snmpInterface snmp WHERE snmp.nodeid = ?::integer AND snmp.snmpifindex = ?::integer" type="sql">
              <value matches=".*" name="nodeid" result="${0}" type="field"/>
              <value matches=".*" name="~^\.1\.3\.6\.1\.2\.1\.2\.2\.1\.1\.([0-9]*)$" result="${0}" type="parameter"/>
            </value>
          </assignment>
        </mapping>
        <mapping>
          <assignment name="uei" type="field">
            <value result="uei.opennms.org/internal/topology/linkDown" type="constant"/>
          </assignment>
        </mapping>
      </mappings>
    </event-translation-spec>
    <event-translation-spec uei="uei.opennms.org/generic/traps/SNMP_Link_Up">
      <mappings>
        <mapping>
          <assignment name="uei" type="field">
            <value result="uei.opennms.org/translator/traps/SNMP_Link_Up" type="constant"/>
          </assignment>
          <assignment name="ifDescr" type="parameter">
            <value result="SELECT snmp.snmpIfDescr FROM snmpInterface snmp WHERE snmp.nodeid = ?::integer AND snmp.snmpifindex = ?::integer" type="sql">
              <value matches=".*" name="nodeid" result="${0}" type="field"/>
              <value matches=".*" name="~^\.1\.3\.6\.1\.2\.1\.2\.2\.1\.1\.([0-9]*)$" result="${0}" type="parameter"/>
            </value>
          </assignment>
          <assignment name="ifName" type="parameter">
            <value result="SELECT snmp.snmpIfName FROM snmpInterface snmp WHERE snmp.nodeid = ?::integer AND snmp.snmpifindex = ?::integer" type="sql">
              <value matches=".*" name="nodeid" result="${0}" type="field"/>
              <value matches=".*" name="~^\.1\.3\.6\.1\.2\.1\.2\.2\.1\.1\.([0-9]*)$" result="${0}" type="parameter"/>
            </value>
          </assignment>
          <assignment name="ifAlias" type="parameter">
            <value result="SELECT snmp.snmpIfAlias FROM snmpInterface snmp WHERE snmp.nodeid = ?::integer AND snmp.snmpifindex = ?::integer" type="sql">
              <value matches=".*" name="nodeid" result="${0}" type="field"/>
              <value matches=".*" name="~^\.1\.3\.6\.1\.2\.1\.2\.2\.1\.1\.([0-9]*)$" result="${0}" type="parameter"/>
            </value>
          </assignment>
        </mapping>
        <mapping>
          <assignment name="uei" type="field">
            <value result="uei.opennms.org/internal/topology/linkUp" type="constant"/>
          </assignment>
        </mapping>
      </mappings>
    </event-translation-spec>
    
    <!-- This translation is predifined for integration with Hyperic-HQ server and the OpenNMS integrations found in
         the $OPENNMS_HOME/contrib/hyperic-integration directory -->
    <event-translation-spec uei="uei.opennms.org/external/hyperic/alert">
      <mappings>
        <mapping>
          <assignment name="uei" type="field">
            <value result="uei.opennms.org/internal/translator/hypericAlert" type="constant"/>
          </assignment>
          <assignment name="nodeid" type="field">
            <value result="SELECT n.nodeid FROM node n WHERE n.foreignid = ? AND n.foreignsource = ?" type="sql">
              <value matches=".*" name="platform.id" result="${0}" type="parameter"/>
              <value matches=".*" name="alert.source" result="${0}" type="parameter"/>
            </value>
          </assignment>
        </mapping>
      </mappings>
    </event-translation-spec>
  
    <!-- Translations for configuration management -->
    <event-translation-spec uei="uei.opennms.org/vendor/Cisco/traps/ciscoConfigManEvent">
      <mappings>
        <mapping>
          <assignment name="uei" type="field">
            <value result="uei.opennms.org/internal/translator/entityConfigChanged" type="constant"/>
          </assignment>
          <assignment name="configSource" type="parameter">
            <!-- ccmHistoryEventCommandSource -->
            <value matches=".*" name="~^\.1\.3\.6\.1\.4\.1\.9\.9\.43\.1\.1\.6\.1\.3\..*" result="${0}" type="parameter"/>
          </assignment>
          <assignment name="configUser" type="parameter">
            <value result="Unknown" type="constant"/>
          </assignment>
        </mapping>
      </mappings>
    </event-translation-spec>
    <event-translation-spec uei="uei.opennms.org/vendor/Juniper/traps/jnxCmCfgChange">
      <mappings>
        <mapping>
          <assignment name="uei" type="field">
            <value result="uei.opennms.org/internal/translator/entityConfigChanged" type="constant"/>
          </assignment>
          <assignment name="configSource" type="parameter">
            <value matches=".*" name="~^\.1\.3\.6\.1\.4\.1\.2636\.3\.18\.1\.7\.1\.4\..*" result="${0}" type="parameter"/>
          </assignment>
          <assignment name="configUser" type="parameter">
            <value matches=".*" name="~^\.1\.3\.6\.1\.4\.1\.2636\.3\.18\.1\.7\.1\.5\..*" result="${0}" type="parameter"/>
          </assignment>
        </mapping>
      </mappings>
    </event-translation-spec>
  
  </translation>

</event-translator-configuration>